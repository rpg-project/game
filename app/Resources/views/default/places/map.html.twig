{% extends 'default/players/playerPage.html.twig' %}



{% block main %}
    <style>
        canvas{
            position:absolute;
            top:0;
            left:0;
            z-index:100;
        }
    </style>
<div id="map" class="col-lg-8">
    <div class="row">
        <div class="col-lg-8">
            {% if map is not empty %}
            <table id="zone" style="border:1px solid black;display:none;">
                {% for lines in map %}
                <tr>
                    {% for col in lines %}
                        <td obstacle="{{ col.obstacle }}" trigger="{{ col.trigger }}" monster='{{ col.monster}}' decor='{{ col.decoration[:-4] }}'>
                            {% if col.monster != "0" %}
                                <img src="{{col.monster}}" class="invisible" width="40" heigth="40">
                            {% endif %}
                            {% if col.trigger == "1" %}
                                <img id="hero" line="{{col.x}}" col="{{col.y}}" src="{{asset(null)}}images/tete.jpg" width="40" heigth="40"  >
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </table>
                    <canvas id="game" width="{{ map | first | length * 40}}" height="{{ map | length * 40 }}"></canvas>
                    <canvas id="fog" width="{{ map | first | length * 40}}" height="{{ map | length * 40 }}"></canvas>
            {% else %}
                Pas de carte : en construction
            {% endif %}
            {#<canvas id="game" width="{% for key,lines in map %}{% if key == 0 %}{{ lines | length * 40 }}{% endif %}{% endfor %}" height="{{ map | length * 40 }}"></canvas>#}
            {#<canvas id="main"></canvas>#}
            {#<canvas id="fog"></canvas>#}
            {#<canvas id="dark"></canvas>#}
        </div>
        <div class="col-lg-2">
            <div id="dialog"></div>
        </div>
    </div>
    <div class="row">

    </div>
</div>

<!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#quest" style="display:none;">Open Modal</button>

<!-- Modal -->
{% for info in infos %}
<div id="{{ info.id }}" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{ info.title }}</h4>
      </div>
      <div class="modal-body">
        <p>{{ info.infos|raw }}</p>
      </div>
    </div>

  </div>
</div>
{% endfor %}
    <script src="{{ asset('roland/js/vendor/modernizr-3.5.0.min.js') }}"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="{{ asset('roland/js/vendor/jquery-3.2.1.min.js') }}"><\/script>')</script>
    <script src="{{ asset('roland/js/bootstrap.min.js') }}"></script>
    <script src="{{ asset('roland/js/map.js') }}"></script>
{% endblock %}